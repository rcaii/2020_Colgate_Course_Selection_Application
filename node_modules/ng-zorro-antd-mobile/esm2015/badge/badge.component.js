import { __decorate, __metadata } from "tslib";
import { Component, OnInit, Input, HostBinding, OnChanges, ElementRef, AfterViewInit, Renderer2 } from '@angular/core';
let BadgeComponent = class BadgeComponent {
    constructor(_ref, render) {
        this._ref = _ref;
        this.render = render;
        this.prefixCls = 'am-badge';
        this.scrollNumberCls = {};
        this.style = {};
        this._size = 'small';
        this._dot = false;
        this._hot = false;
        this._corner = false;
        this._children = false;
        this._overflowCount = 99;
        this.clsBadge = true;
        this.clsBadgeWrp = !this._children;
        this.clsBadgeCornerWrp = this._corner;
        this.clsBadgeHot = !!this._hot;
        this.clsBadgeCornerWrpLg = this._corner && this._size === 'large';
    }
    set size(v) {
        this._size = v;
        this.setCls();
    }
    get text() {
        return this._text;
    }
    set text(v) {
        this._text = v;
        this.setCls();
    }
    set corner(v) {
        this._corner = v;
        this.setCls();
    }
    get dot() {
        return this._dot;
    }
    set dot(v) {
        this._dot = v;
        if (this._dot) {
            this._text = '';
        }
        this.setCls();
    }
    set overflowCount(v) {
        this._overflowCount = v;
    }
    set hot(v) {
        this._hot = v;
        this.setCls();
    }
    set setStyle(v) {
        this.style = v;
    }
    set className(v) {
        this._setClass = v;
        const clsArr = this._setClass.split(' ');
        clsArr.forEach(cls => {
            this.render.addClass(this._ref.nativeElement, cls);
        });
    }
    setCls() {
        this.scrollNumberCls = {
            [`${this.prefixCls}-dot`]: this._dot,
            [`${this.prefixCls}-dot-large`]: this._dot && this._size === 'large',
            [`${this.prefixCls}-text`]: !this._dot && !this._corner,
            [`${this.prefixCls}-corner`]: this._corner,
            [`${this.prefixCls}-corner-large`]: this._corner && this._size === 'large'
        };
        this.clsBadgeWrp = !this._children;
        this.clsBadgeCornerWrp = this._corner;
        this.clsBadgeHot = !!this._hot;
        this.clsBadgeCornerWrpLg = this._corner && this._size === 'large';
    }
    ngOnChanges() {
        if (typeof this._text === 'number' && this._text > this._overflowCount) {
            this._text = this._overflowCount + '+';
        }
    }
    ngOnInit() {
        this.setCls();
    }
    ngAfterViewInit() {
        setTimeout(() => {
            if (this._ref.nativeElement.children.length > 1 ||
                (this._ref.nativeElement.children.length === 1 && !this.dot && !this.text)) {
                this._children = true;
                this.setCls();
            }
        }, 10);
    }
};
BadgeComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
__decorate([
    Input(),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], BadgeComponent.prototype, "size", null);
__decorate([
    Input(),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], BadgeComponent.prototype, "text", null);
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], BadgeComponent.prototype, "corner", null);
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], BadgeComponent.prototype, "dot", null);
__decorate([
    Input(),
    __metadata("design:type", Number),
    __metadata("design:paramtypes", [Number])
], BadgeComponent.prototype, "overflowCount", null);
__decorate([
    Input(),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], BadgeComponent.prototype, "hot", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], BadgeComponent.prototype, "setStyle", null);
__decorate([
    Input(),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], BadgeComponent.prototype, "className", null);
__decorate([
    HostBinding('class.am-badge'),
    __metadata("design:type", Boolean)
], BadgeComponent.prototype, "clsBadge", void 0);
__decorate([
    HostBinding('class.am-badge-not-a-wrapper'),
    __metadata("design:type", Boolean)
], BadgeComponent.prototype, "clsBadgeWrp", void 0);
__decorate([
    HostBinding('class.am-badge-corner-wrapper'),
    __metadata("design:type", Boolean)
], BadgeComponent.prototype, "clsBadgeCornerWrp", void 0);
__decorate([
    HostBinding('class.am-badge-hot'),
    __metadata("design:type", Boolean)
], BadgeComponent.prototype, "clsBadgeHot", void 0);
__decorate([
    HostBinding('class.am-badge-corner-wrapper-large'),
    __metadata("design:type", Boolean)
], BadgeComponent.prototype, "clsBadgeCornerWrpLg", void 0);
BadgeComponent = __decorate([
    Component({
        selector: 'Badge, nzm-badge',
        template: "<ng-content></ng-content>\n<sup *ngIf=\"dot || text\" [ngClass]=\"scrollNumberCls\" [ngStyle]=\"style\">\n  <span>{{ text }}</span>\n</sup>\n"
    }),
    __metadata("design:paramtypes", [ElementRef, Renderer2])
], BadgeComponent);
export { BadgeComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFkZ2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctem9ycm8tYW50ZC1tb2JpbGUvIiwic291cmNlcyI6WyJiYWRnZS9iYWRnZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBTXZILElBQWEsY0FBYyxHQUEzQixNQUFhLGNBQWM7SUE0RXpCLFlBQW9CLElBQWdCLEVBQVUsTUFBaUI7UUFBM0MsU0FBSSxHQUFKLElBQUksQ0FBWTtRQUFVLFdBQU0sR0FBTixNQUFNLENBQVc7UUEzRS9ELGNBQVMsR0FBVyxVQUFVLENBQUM7UUFDL0Isb0JBQWUsR0FBVyxFQUFFLENBQUM7UUFDN0IsVUFBSyxHQUFXLEVBQUUsQ0FBQztRQUlYLFVBQUssR0FBVyxPQUFPLENBQUM7UUFDeEIsU0FBSSxHQUFZLEtBQUssQ0FBQztRQUN0QixTQUFJLEdBQVksS0FBSyxDQUFDO1FBQ3RCLFlBQU8sR0FBWSxLQUFLLENBQUM7UUFDekIsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUMzQixtQkFBYyxHQUFXLEVBQUUsQ0FBQztRQXNEcEMsYUFBUSxHQUFZLElBQUksQ0FBQztRQUV6QixnQkFBVyxHQUFZLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUV2QyxzQkFBaUIsR0FBWSxJQUFJLENBQUMsT0FBTyxDQUFDO1FBRTFDLGdCQUFXLEdBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFFbkMsd0JBQW1CLEdBQVksSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQztJQUVKLENBQUM7SUE3RG5FLElBQUksSUFBSSxDQUFDLENBQVM7UUFDaEIsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7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LG9CQUFvQixDQUFDOzttREFDQztBQUVuQztJQURDLFdBQVcsQ0FBQyxxQ0FBcUMsQ0FBQzs7MkRBQ21CO0FBMUUzRCxjQUFjO0lBSjFCLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSxrQkFBa0I7UUFDNUIseUpBQXFDO0tBQ3RDLENBQUM7cUNBNkUwQixVQUFVLEVBQWtCLFNBQVM7R0E1RXBELGNBQWMsQ0FpSDFCO1NBakhZLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEhvc3RCaW5kaW5nLCBPbkNoYW5nZXMsIEVsZW1lbnRSZWYsIEFmdGVyVmlld0luaXQsIFJlbmRlcmVyMiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdCYWRnZSwgbnptLWJhZGdlJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2JhZGdlLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBCYWRnZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcbiAgcHJlZml4Q2xzOiBzdHJpbmcgPSAnYW0tYmFkZ2UnO1xuICBzY3JvbGxOdW1iZXJDbHM6IG9iamVjdCA9IHt9O1xuICBzdHlsZTogb2JqZWN0ID0ge307XG5cbiAgcHJpdmF0ZSBfdGV4dDogc3RyaW5nO1xuICBwcml2YXRlIF9zZXRDbGFzczogc3RyaW5nO1xuICBwcml2YXRlIF9zaXplOiBzdHJpbmcgPSAnc21hbGwnO1xuICBwcml2YXRlIF9kb3Q6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfaG90OiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2Nvcm5lcjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9jaGlsZHJlbjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9vdmVyZmxvd0NvdW50OiBudW1iZXIgPSA5OTtcblxuICBASW5wdXQoKVxuICBzZXQgc2l6ZSh2OiBzdHJpbmcpIHtcbiAgICB0aGlzLl9zaXplID0gdjtcbiAgICB0aGlzLnNldENscygpO1xuICB9XG4gIEBJbnB1dCgpXG4gIGdldCB0ZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3RleHQ7XG4gIH1cbiAgc2V0IHRleHQodjogc3RyaW5nKSB7XG4gICAgdGhpcy5fdGV4dCA9IHY7XG4gICAgdGhpcy5zZXRDbHMoKTtcbiAgfVxuICBASW5wdXQoKVxuICBzZXQgY29ybmVyKHY6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9jb3JuZXIgPSB2O1xuICAgIHRoaXMuc2V0Q2xzKCk7XG4gIH1cbiAgQElucHV0KClcbiAgZ2V0IGRvdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZG90O1xuICB9XG4gIHNldCBkb3QodjogYm9vbGVhbikge1xuICAgIHRoaXMuX2RvdCA9IHY7XG4gICAgaWYgKHRoaXMuX2RvdCkge1xuICAgICAgdGhpcy5fdGV4dCA9ICcnO1xuICAgIH1cbiAgICB0aGlzLnNldENscygpO1xuICB9XG4gIEBJbnB1dCgpXG4gIHNldCBvdmVyZmxvd0NvdW50KHY6IG51bWJlcikge1xuICAgIHRoaXMuX292ZXJmbG93Q291bnQgPSB2O1xuICB9XG4gIEBJbnB1dCgpXG4gIHNldCBob3QodjogYm9vbGVhbikge1xuICAgIHRoaXMuX2hvdCA9IHY7XG4gICAgdGhpcy5zZXRDbHMoKTtcbiAgfVxuICBASW5wdXQoKVxuICBzZXQgc2V0U3R5bGUodjogb2JqZWN0KSB7XG4gICAgdGhpcy5zdHlsZSA9IHY7XG4gIH1cbiAgQElucHV0KClcbiAgc2V0IGNsYXNzTmFtZSh2OiBzdHJpbmcpIHtcbiAgICB0aGlzLl9zZXRDbGFzcyA9IHY7XG4gICAgY29uc3QgY2xzQXJyID0gdGhpcy5fc2V0Q2xhc3Muc3BsaXQoJyAnKTtcbiAgICBjbHNBcnIuZm9yRWFjaChjbHMgPT4ge1xuICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5fcmVmLm5hdGl2ZUVsZW1lbnQsIGNscyk7XG4gICAgfSk7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmFtLWJhZGdlJylcbiAgY2xzQmFkZ2U6IGJvb2xlYW4gPSB0cnVlO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmFtLWJhZGdlLW5vdC1hLXdyYXBwZXInKVxuICBjbHNCYWRnZVdycDogYm9vbGVhbiA9ICF0aGlzLl9jaGlsZHJlbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5hbS1iYWRnZS1jb3JuZXItd3JhcHBlcicpXG4gIGNsc0JhZGdlQ29ybmVyV3JwOiBib29sZWFuID0gdGhpcy5fY29ybmVyO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmFtLWJhZGdlLWhvdCcpXG4gIGNsc0JhZGdlSG90OiBib29sZWFuID0gISF0aGlzLl9ob3Q7XG4gIEBIb3N0QmluZGluZygnY2xhc3MuYW0tYmFkZ2UtY29ybmVyLXdyYXBwZXItbGFyZ2UnKVxuICBjbHNCYWRnZUNvcm5lcldycExnOiBib29sZWFuID0gdGhpcy5fY29ybmVyICYmIHRoaXMuX3NpemUgPT09ICdsYXJnZSc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfcmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyKSB7fVxuXG4gIHNldENscygpIHtcbiAgICB0aGlzLnNjcm9sbE51bWJlckNscyA9IHtcbiAgICAgIFtgJHt0aGlzLnByZWZpeENsc30tZG90YF06IHRoaXMuX2RvdCxcbiAgICAgIFtgJHt0aGlzLnByZWZpeENsc30tZG90LWxhcmdlYF06IHRoaXMuX2RvdCAmJiB0aGlzLl9zaXplID09PSAnbGFyZ2UnLFxuICAgICAgW2Ake3RoaXMucHJlZml4Q2xzfS10ZXh0YF06ICF0aGlzLl9kb3QgJiYgIXRoaXMuX2Nvcm5lcixcbiAgICAgIFtgJHt0aGlzLnByZWZpeENsc30tY29ybmVyYF06IHRoaXMuX2Nvcm5lcixcbiAgICAgIFtgJHt0aGlzLnByZWZpeENsc30tY29ybmVyLWxhcmdlYF06IHRoaXMuX2Nvcm5lciAmJiB0aGlzLl9zaXplID09PSAnbGFyZ2UnXG4gICAgfTtcbiAgICB0aGlzLmNsc0JhZGdlV3JwID0gIXRoaXMuX2NoaWxkcmVuO1xuICAgIHRoaXMuY2xzQmFkZ2VDb3JuZXJXcnAgPSB0aGlzLl9jb3JuZXI7XG4gICAgdGhpcy5jbHNCYWRnZUhvdCA9ICEhdGhpcy5faG90O1xuICAgIHRoaXMuY2xzQmFkZ2VDb3JuZXJXcnBMZyA9IHRoaXMuX2Nvcm5lciAmJiB0aGlzLl9zaXplID09PSAnbGFyZ2UnO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl90ZXh0ID09PSAnbnVtYmVyJyAmJiB0aGlzLl90ZXh0ID4gdGhpcy5fb3ZlcmZsb3dDb3VudCkge1xuICAgICAgdGhpcy5fdGV4dCA9IHRoaXMuX292ZXJmbG93Q291bnQgKyAnKyc7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5zZXRDbHMoKTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fcmVmLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMSB8fFxuICAgICAgICAodGhpcy5fcmVmLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmICF0aGlzLmRvdCAmJiAhdGhpcy50ZXh0KVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRDbHMoKTtcbiAgICAgIH1cbiAgICB9LCAxMCk7XG4gIH1cbn1cbiJdfQ==