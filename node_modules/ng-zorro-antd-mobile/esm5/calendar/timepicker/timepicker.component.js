import { __assign, __decorate, __metadata } from "tslib";
import { Component, ViewEncapsulation, Input, HostBinding } from '@angular/core';
import { zh_CN, en_US } from '../../locale-provider/locale';
var CalendarTimePickerComponent = /** @class */ (function () {
    function CalendarTimePickerComponent() {
        var _this = this;
        this.defaultProps = {
            minDate: new Date(0, 0, 0, 0, 0),
            maxDate: new Date(9999, 11, 31, 23, 59, 59),
            defaultValue: new Date(2000, 1, 1, 8),
            mode: 'time',
            datePickerViewLocale: zh_CN
        };
        this.props = {
            minDate: new Date(0, 0, 0, 0, 0),
            maxDate: new Date(9999, 11, 31, 23, 59, 59),
            defaultValue: new Date(2000, 1, 1, 8),
            mode: 'time',
            datePickerViewLocale: zh_CN
        };
        this.timePicker = true;
        this.onDateChange = function (date) {
            var onValueChange = _this.props.onValueChange;
            if (onValueChange) {
                onValueChange(date.date);
            }
        };
    }
    Object.defineProperty(CalendarTimePickerComponent.prototype, "propsData", {
        set: function (value) {
            this.props = __assign(__assign({}, this.props), value);
            if (this.props.locale && this.props.locale.today === 'Today') {
                this.props.datePickerViewLocale = en_US;
            }
            else {
                this.props.datePickerViewLocale = zh_CN;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CalendarTimePickerComponent.prototype, "title", {
        set: function (value) {
            this.props.title = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CalendarTimePickerComponent.prototype, "value", {
        set: function (value) {
            this.props.value = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CalendarTimePickerComponent.prototype, "prefixCls", {
        set: function (value) {
            this.props.prefixCls = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CalendarTimePickerComponent.prototype, "defaultValue", {
        set: function (value) {
            this.props.defaultValue = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CalendarTimePickerComponent.prototype, "pickerPrefixCls", {
        set: function (value) {
            this.props.pickerPrefixCls = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CalendarTimePickerComponent.prototype, "clientHeight", {
        set: function (value) {
            this.props.clientHeight = value;
            var height = (value && (value * 3) / 8 - 52) || Number.POSITIVE_INFINITY;
            this.selfHeight = (height > 164 || height < 0 ? 164 : height) + 'px';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CalendarTimePickerComponent.prototype, "onValueChange", {
        set: function (value) {
            this.props.onValueChange = value;
        },
        enumerable: true,
        configurable: true
    });
    CalendarTimePickerComponent.prototype.getMinTime = function (date) {
        var minDate = this.props.minDate;
        if (!date ||
            date.getFullYear() > minDate.getFullYear() ||
            date.getMonth() > minDate.getMonth() ||
            date.getDate() > minDate.getDate()) {
            return this.defaultProps.minDate;
        }
        return minDate;
    };
    CalendarTimePickerComponent.prototype.getMaxTime = function (date) {
        var maxDate = this.props.maxDate;
        if (!date ||
            date.getFullYear() < maxDate.getFullYear() ||
            date.getMonth() < maxDate.getMonth() ||
            date.getDate() < maxDate.getDate()) {
            return this.defaultProps.maxDate;
        }
        return maxDate;
    };
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], CalendarTimePickerComponent.prototype, "propsData", null);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], CalendarTimePickerComponent.prototype, "title", null);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], CalendarTimePickerComponent.prototype, "value", null);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], CalendarTimePickerComponent.prototype, "prefixCls", null);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], CalendarTimePickerComponent.prototype, "defaultValue", null);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], CalendarTimePickerComponent.prototype, "pickerPrefixCls", null);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], CalendarTimePickerComponent.prototype, "clientHeight", null);
    __decorate([
        Input(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], CalendarTimePickerComponent.prototype, "onValueChange", null);
    __decorate([
        HostBinding('class.time-picker'),
        __metadata("design:type", Boolean)
    ], CalendarTimePickerComponent.prototype, "timePicker", void 0);
    CalendarTimePickerComponent = __decorate([
        Component({
            selector: 'CalendarTimePicker, nzm-calendar-time-picker',
            template: "<div class=\"title\">{{ props.title }}</div>\n<DatePickerView\n  [ngStyle]=\"{ height: selfHeight, overflow: 'hidden' }\"\n  [mode]=\"props.mode\"\n  [value]=\"props.value\"\n  [locale]=\"props.datePickerViewLocale\"\n  [minDate]=\"getMinTime(props.value || props.defaultValue || undefined)\"\n  [maxDate]=\"getMaxTime(props.value || props.defaultValue || undefined)\"\n  (onValueChange)=\"onDateChange($event)\"\n></DatePickerView>\n",
            encapsulation: ViewEncapsulation.None
        }),
        __metadata("design:paramtypes", [])
    ], CalendarTimePickerComponent);
    return CalendarTimePickerComponent;
}());
export { CalendarTimePickerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZXBpY2tlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZy16b3Jyby1hbnRkLW1vYmlsZS8iLCJzb3VyY2VzIjpbImNhbGVuZGFyL3RpbWVwaWNrZXIvdGltZXBpY2tlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRixPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBUTVEO0lBa0VFO1FBQUEsaUJBQWdCO1FBakVoQixpQkFBWSxHQUFHO1lBQ2IsT0FBTyxFQUFFLElBQUksSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDaEMsT0FBTyxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQzNDLFlBQVksRUFBRSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDckMsSUFBSSxFQUFFLE1BQU07WUFDWixvQkFBb0IsRUFBRSxLQUFLO1NBQ0csQ0FBQztRQUVqQyxVQUFLLEdBQUc7WUFDTixPQUFPLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNoQyxPQUFPLEVBQUUsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDM0MsWUFBWSxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNyQyxJQUFJ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QUFXLElBQVc7UUFDcEIsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFlLENBQUM7UUFDM0MsSUFDRSxDQUFDLElBQUk7WUFDTCxJQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsT0FBTyxDQUFDLFdBQVcsRUFBRTtZQUMxQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsT0FBTyxDQUFDLFFBQVEsRUFBRTtZQUNwQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUNsQztZQUNBLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUM7U0FDbEM7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBL0VEO1FBREMsS0FBSyxFQUFFOzs7Z0VBWVA7SUFFRDtRQURDLEtBQUssRUFBRTs7OzREQUdQO0lBRUQ7UUFEQyxLQUFLLEVBQUU7Ozs0REFHUDtJQUVEO1FBREMsS0FBSyxFQUFFOzs7Z0VBR1A7SUFFRDtRQURDLEtBQUssRUFBRTs7O21FQUdQO0lBRUQ7UUFEQyxLQUFLLEVBQUU7OztzRUFHUDtJQUVEO1FBREMsS0FBSyxFQUFFOzs7bUVBS1A7SUFFRDtRQURDLEtBQUssRUFBRTs7O29FQUdQO0lBR0Q7UUFEQyxXQUFXLENBQUMsbUJBQW1CLENBQUM7O21FQUNOO0lBaEVoQiwyQkFBMkI7UUFMdkMsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLDhDQUE4QztZQUN4RCw4YkFBMEM7WUFDMUMsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7U0FDdEMsQ0FBQzs7T0FDVywyQkFBMkIsQ0FvR3ZDO0lBQUQsa0NBQUM7Q0FBQSxBQXBHRCxJQW9HQztTQXBHWSwyQkFBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBJbnB1dCwgSG9zdEJpbmRpbmcgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHpoX0NOLCBlbl9VUyB9IGZyb20gJy4uLy4uL2xvY2FsZS1wcm92aWRlci9sb2NhbGUnO1xuaW1wb3J0IHsgQ2FsZW5kYXJUaW1lUGlja2VyUHJvcHNUeXBlIH0gZnJvbSAnLi9Qcm9wc1R5cGUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdDYWxlbmRhclRpbWVQaWNrZXIsIG56bS1jYWxlbmRhci10aW1lLXBpY2tlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi90aW1lcGlja2VyLmNvbXBvbmVudC5odG1sJyxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBDYWxlbmRhclRpbWVQaWNrZXJDb21wb25lbnQge1xuICBkZWZhdWx0UHJvcHMgPSB7XG4gICAgbWluRGF0ZTogbmV3IERhdGUoMCwgMCwgMCwgMCwgMCksXG4gICAgbWF4RGF0ZTogbmV3IERhdGUoOTk5OSwgMTEsIDMxLCAyMywgNTksIDU5KSxcbiAgICBkZWZhdWx0VmFsdWU6IG5ldyBEYXRlKDIwMDAsIDEsIDEsIDgpLFxuICAgIG1vZGU6ICd0aW1lJyxcbiAgICBkYXRlUGlja2VyVmlld0xvY2FsZTogemhfQ05cbiAgfSBhcyBDYWxlbmRhclRpbWVQaWNrZXJQcm9wc1R5cGU7XG5cbiAgcHJvcHMgPSB7XG4gICAgbWluRGF0ZTogbmV3IERhdGUoMCwgMCwgMCwgMCwgMCksXG4gICAgbWF4RGF0ZTogbmV3IERhdGUoOTk5OSwgMTEsIDMxLCAyMywgNTksIDU5KSxcbiAgICBkZWZhdWx0VmFsdWU6IG5ldyBEYXRlKDIwMDAsIDEsIDEsIDgpLFxuICAgIG1vZGU6ICd0aW1lJyxcbiAgICBkYXRlUGlja2VyVmlld0xvY2FsZTogemhfQ05cbiAgfSBhcyBDYWxlbmRhclRpbWVQaWNrZXJQcm9wc1R5cGU7XG5cbiAgc2VsZkhlaWdodDogc3RyaW5nO1xuXG4gIEBJbnB1dCgpXG4gIHNldCBwcm9wc0RhdGEodmFsdWUpIHtcbiAgICB0aGlzLnByb3BzID0ge1xuICAgICAgLi4udGhpcy5wcm9wcyxcbiAgICAgIC4uLnZhbHVlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLnByb3BzLmxvY2FsZSAmJiB0aGlzLnByb3BzLmxvY2FsZS50b2RheSA9PT0gJ1RvZGF5Jykge1xuICAgICAgdGhpcy5wcm9wcy5kYXRlUGlja2VyVmlld0xvY2FsZSA9IGVuX1VTO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByb3BzLmRhdGVQaWNrZXJWaWV3TG9jYWxlID0gemhfQ047XG4gICAgfVxuICB9XG4gIEBJbnB1dCgpXG4gIHNldCB0aXRsZSh2YWx1ZSkge1xuICAgIHRoaXMucHJvcHMudGl0bGUgPSB2YWx1ZTtcbiAgfVxuICBASW5wdXQoKVxuICBzZXQgdmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnByb3BzLnZhbHVlID0gdmFsdWU7XG4gIH1cbiAgQElucHV0KClcbiAgc2V0IHByZWZpeENscyh2YWx1ZSkge1xuICAgIHRoaXMucHJvcHMucHJlZml4Q2xzID0gdmFsdWU7XG4gIH1cbiAgQElucHV0KClcbiAgc2V0IGRlZmF1bHRWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMucHJvcHMuZGVmYXVsdFZhbHVlID0gdmFsdWU7XG4gIH1cbiAgQElucHV0KClcbiAgc2V0IHBpY2tlclByZWZpeENscyh2YWx1ZSkge1xuICAgIHRoaXMucHJvcHMucGlja2VyUHJlZml4Q2xzID0gdmFsdWU7XG4gIH1cbiAgQElucHV0KClcbiAgc2V0IGNsaWVudEhlaWdodCh2YWx1ZSkge1xuICAgIHRoaXMucHJvcHMuY2xpZW50SGVpZ2h0ID0gdmFsdWU7XG4gICAgY29uc3QgaGVpZ2h0ID0gKHZhbHVlICYmICh2YWx1ZSAqIDMpIC8gOCAtIDUyKSB8fCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgdGhpcy5zZWxmSGVpZ2h0ID0gKGhlaWdodCA+IDE2NCB8fCBoZWlnaHQgPCAwID8gMTY0IDogaGVpZ2h0KSArICdweCc7XG4gIH1cbiAgQElucHV0KClcbiAgc2V0IG9uVmFsdWVDaGFuZ2UodmFsdWUpIHtcbiAgICB0aGlzLnByb3BzLm9uVmFsdWVDaGFuZ2UgPSB2YWx1ZTtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3MudGltZS1waWNrZXInKVxuICB0aW1lUGlja2VyOiBib29sZWFuID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgb25EYXRlQ2hhbmdlID0gKGRhdGU6IHsgZGF0ZTogRGF0ZTsgaW5kZXg6IG51bWJlciB9KSA9PiB7XG4gICAgY29uc3QgeyBvblZhbHVlQ2hhbmdlIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChvblZhbHVlQ2hhbmdlKSB7XG4gICAgICBvblZhbHVlQ2hhbmdlKGRhdGUuZGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0TWluVGltZShkYXRlPzogRGF0ZSkge1xuICAgIGNvbnN0IG1pbkRhdGUgPSB0aGlzLnByb3BzLm1pbkRhdGUgYXMgRGF0ZTtcbiAgICBpZiAoXG4gICAgICAhZGF0ZSB8fFxuICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpID4gbWluRGF0ZS5nZXRGdWxsWWVhcigpIHx8XG4gICAgICBkYXRlLmdldE1vbnRoKCkgPiBtaW5EYXRlLmdldE1vbnRoKCkgfHxcbiAgICAgIGRhdGUuZ2V0RGF0ZSgpID4gbWluRGF0ZS5nZXREYXRlKClcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRQcm9wcy5taW5EYXRlO1xuICAgIH1cbiAgICByZXR1cm4gbWluRGF0ZTtcbiAgfVxuXG4gIGdldE1heFRpbWUoZGF0ZT86IERhdGUpIHtcbiAgICBjb25zdCBtYXhEYXRlID0gdGhpcy5wcm9wcy5tYXhEYXRlIGFzIERhdGU7XG4gICAgaWYgKFxuICAgICAgIWRhdGUgfHxcbiAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSA8IG1heERhdGUuZ2V0RnVsbFllYXIoKSB8fFxuICAgICAgZGF0ZS5nZXRNb250aCgpIDwgbWF4RGF0ZS5nZXRNb250aCgpIHx8XG4gICAgICBkYXRlLmdldERhdGUoKSA8IG1heERhdGUuZ2V0RGF0ZSgpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZWZhdWx0UHJvcHMubWF4RGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIG1heERhdGU7XG4gIH1cbn1cbiJdfQ==